option(PL_NETLIST_MODIFIER "PL_NETLIST_MODIFIER" OFF)

if(PL_NETLIST_MODIFIER OR BUILD_ALL_PLUGINS)
    file(GLOB_RECURSE NETLIST_MODIFIER_INC ${CMAKE_CURRENT_SOURCE_DIR}/include/*.h)
    file(GLOB_RECURSE NETLIST_MODIFIER_SRC ${CMAKE_CURRENT_SOURCE_DIR}/src/*.cpp)
    file(GLOB_RECURSE NETLIST_MODIFIER_PYTHON_SRC ${CMAKE_CURRENT_SOURCE_DIR}/python/*.cpp)

    pkg_check_modules(Cryptopp REQUIRED IMPORTED_TARGET libcrypto++)

    hal_add_plugin(netlist_modifier
        SHARED
        HEADER ${NETLIST_MODIFIER_INC}
        SOURCES ${NETLIST_MODIFIER_SRC} ${NETLIST_MODIFIER_PYTHON_SRC}
        LINK_LIBRARIES PUBLIC gui netlist_simulator_controller PkgConfig::Cryptopp
        PYDOC SPHINX_DOC_INDEX_FILE ${CMAKE_CURRENT_SOURCE_DIR}/documentation/netlist_modifier.rst
    )
endif()